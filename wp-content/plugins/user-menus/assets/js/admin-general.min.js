!function(o){"use strict";function e(){var e=o(this),t=e.parents(".menu-item").find(".nav_item_options-redirect_url");"custom"==e.val()?t.slideDown():t.slideUp()}function t(){var e=o(this),t=e.parents(".menu-item").find(".nav_item_options-avatar_size");0<=e.val().indexOf("{avatar}")?t.slideDown():t.slideUp()}function n(){var e=o(this),t=e.parents(".menu-item"),n=t.find(".nav_item_options-can_see"),i=t.find(".nav_item_options-roles"),s=t.find(".jpum-user-codes");"logged_in"===e.val()?(n.slideDown(),i.slideDown(),t.addClass("show-insert-button"),s.fadeOut(0).fadeIn()):(n.slideUp(),i.slideUp(),s.fadeOut(function(){t.removeClass("show-insert-button")}))}function s(e){void 0!==e&&o(e.target).parents(".jpum-user-codes").length||o(".jpum-user-codes").removeClass("open")}function i(){o("input.edit-menu-item-title").each(function(){var e=o(this).parents("label"),t=_.template(o("#tmpl-jpum-user-codes").html());e.parents("p").find(".jpum-user-codes").length||e.after(t())}),o(".nav_item_options-redirect_type select").each(e),o(".nav_item_options-which_users select").each(n),o(".nav_item_options-which_users select").each(n),o("input.edit-menu-item-title").each(t)}jQuery(document).on("change",".nav_item_options-redirect_type select",e).on("change",".nav_item_options-which_users select",n).on("change keyup focusout","input.edit-menu-item-title",t).on("click",".jpum-user-codes > button",function(){o(this).parent().toggleClass("open")}).on("click keypress",".jpum-user-codes li > a",function(e){var t=o(this),n=t.parents("p").find("input"),i=n.val();e.which=e.which||e.keyCode,"keypress"===e.type&&13!==e.keyCode&&32!==e.keyCode||(n.val(i+"{"+t.data("code")+"}").trigger("change"),s(),e.preventDefault())}).on("click",s).on("menu-item-added",i),o(".submit-add-to-menu").click(function(){setTimeout(i,1e3)}),o(i),o(function(){var e=o(".user-menus-registration-disabled");e.length&&e.find('li:eq(1) input[type="checkbox"]').attr("disabled",!0)})}(jQuery);